apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "matrixone-operator.name" . }}-cm
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "matrixone-operator.labels" . | nindent 4 }}
data:
  defaultArgs: |
    {{- range .Values.defaultArgs }}
    {{.name | nindent 4 }}:
    {{- toYaml .values | nindent 4 }}
    {{- end }}

  bucketCleanJob:
    image: {{ .Values.bucketCleanJob.image | default "amazon/aws-cli" | quote }}
    {{- with .Values.bucketCleanJob.imagePullSecrets }}
    imagePullSecrets:
    {{- toYaml . | nindent 6 }}
    {{- end }}

  featureGates: |
    {{- range $key, $value := .Values.featureGates }}
    {{ $key }}: {{ $value }}
    {{- end }}

  brConfig: |
    image: "{{- .Values.globalRegistryPrefix -}}{{- .Values.backupRestore.image -}}"
